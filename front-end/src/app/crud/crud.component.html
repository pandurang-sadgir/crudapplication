<br><br><br><br>
<p>
  <mat-toolbar>
    <span>
      <mat-card class="example-card">
        <mat-card-header>
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title>CRUD Application</mat-card-title>
          <mat-card-subtitle>Mean stack</mat-card-subtitle>
        </mat-card-header>
      </mat-card></span>
  </mat-toolbar>
</p>

<div *ngIf="state=='default'">
  <div fxLayout="row" fxLayoutAlign="center center">
    <button mat-stroked-button color="accent" (click)="add_newuser()">Add New</button>
    </div>


<mat-form-field>
  <mat-label>Filter</mat-label>
  <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Mia" #input>
</mat-form-field>

<div class="mat-elevation-z8">
  <table mat-table [dataSource]="dataSource" matSort >

    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
      <td mat-cell *matCellDef="let row"> {{row.id}} </td>
    </ng-container>

    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> NAME </th>
      <td mat-cell *matCellDef="let row"> {{row.name}} </td>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> E-MAIL </th>
      <td mat-cell *matCellDef="let row"> {{row.email}} </td>
    </ng-container>

    <ng-container matColumnDef="password">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> PASSWORD </th>
      <td mat-cell *matCellDef="let row"> {{row.password}} </td>
    </ng-container>

    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> --- </th>
      <td mat-cell *matCellDef="let row">
         <button mat-icon-button color="primary" (click)="edit(row)">
          <mat-icon>edit</mat-icon>
        </button>
      </td>
    </ng-container>


    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

  </table>
  <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>

</div>

</div>

<!-- This is Form-->
<div *ngIf="state!=='default'"> <!-- in ngif value must be in '' within nested ""  -->
<div fxLayout="row">
  <div fxFlex="20"></div>
  <div fxFlex style="padding:50px">
  <mat-card class="example-card">
  <mat-card-header>

    <mat-card-title>Fill up Form </mat-card-title>

  </mat-card-header>

  <mat-card-content >

    <form [formGroup]="fgregister" fxLayout="column" fxLayoutGap="5px">
      <mat-form-field class="example-full-width">
        <mat-label>Name</mat-label>
        <input matInput  placeholder="user name" required formControlName="name">
        <mat-error> Please enter name</mat-error>
      </mat-form-field>

      <mat-form-field class="example-full-width">
        <mat-label>Email</mat-label>
        <input matInput  placeholder="Email" required formControlName="email">
        <mat-error> Email is mandatory</mat-error>
      </mat-form-field>

      <mat-form-field class="example-full-width">
        <mat-label>Password</mat-label>
        <input matInput  placeholder="password" required formControlName="password">
        <mat-error> Please enter password</mat-error>
      </mat-form-field>
    </form>

      </mat-card-content>
  <mat-card-actions>
    <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="10px">
      <button mat-stroked-button color="primary" *ngIf="state=='add new user'"  (click)="save()" [disabled]="fgregister.invalid">Save</button>
      <button mat-stroked-button color="primary" *ngIf="state=='edit row'" (click)="update()">Update</button>
      <button mat-stroked-button color="warn"    *ngIf="state=='edit row'" (click)="delete()">Delete</button>
      <button mat-stroked-button color="accent" (click)="back()">Back</button>
    </div>
  </mat-card-actions>
</mat-card>
</div>
<div fxFlex="20"></div>
</div>
</div>
